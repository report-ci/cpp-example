language: cpp
compiler:
  - gcc

os:
  - linux

addons:
  apt:
    packages:
      - cmake
      - cxxtest
      - googletest

script:
  - mkdir build &&  cd build
  - cmake ..
  - cmake --build . -- -j4
  - cd test
  - ctest . -C Debug -V

after_script:
  - curl -s https://raw.githubusercontent.com/report-ci/scripts/master/upload.py > upload.py
  - python upload.py --framework bandit
  - python upload.py --framework cpputest --include */cpputest*.xml
  - python upload.py --framework cute --include */cute*.xml
  - python upload.py --framework cxxtest --include */cxxtest.xml
  - python upload.py --framework gtest --include */gtest.xml
